# NixOS-Dotfiles

My personal NixOS configuration featuring the Niri window manager with Noctalia-Shell theming, managed using Nix flakes and Home Manager.

## Overview

This repository contains a fully declarative NixOS configuration that leverages the power of Nix flakes for reproducible system builds. The setup features a modern Wayland-based desktop environment with automated theming and a carefully curated selection of tools and applications.

### Repository Structure

| File | Purpose |
| --- | --- |
| `flake.nix` | Flake entry point that declares inputs and integrates Home Manager into the system configuration |
| `configuration.nix` | System-wide configuration including bootloader, networking, programs, packages, and fonts |
| `home.nix` | User-level configuration managed by Home Manager for shell, terminal, cursor, and system fetch |
| `hardware-configuration.nix` | Auto-generated hardware-specific configuration (machine-specific, not to be edited manually) |

## [Hardware Configuration]

The `hardware-configuration.nix` file is automatically generated by `nixos-generate-config` and contains machine-specific settings including:

- Filesystem mount points and UUIDs
- Boot loader configuration
- Kernel modules required for your specific hardware
- CPU microcode updates
- Initial ramdisk settings

**Important:** This file is tied to the specific machine it was generated on. When reproducing this configuration on a new system, you must regenerate this file using:

```bash
nixos-generate-config --show-hardware-config
```

## Features

### Desktop Environment
- **Window Manager:** Niri - A scrollable-tiling Wayland compositor
- **Wayland:** Full Wayland support for modern display server protocol
- **Theming:** Noctalia-Shell for dynamic, wallpaper-based color generation
- **Visuals:** Automatic theme generation based on your wallpaper (when enabled in Noctalia)

### Terminal & Shell
- **Terminal Emulator:** Alacritty with 85% opacity
- **Theme Integration:** Uses Noctalia's generated `themes/noctalia.toml` for consistent theming
- **Font:** JetBrains Mono Nerd Font configured system-wide via fontconfig

### Fonts
- **Primary Font:** JetBrains Mono Nerd Font
- **Coverage:** System-wide font configuration through fontconfig
- **Terminal:** Explicitly configured in Alacritty for consistency

### Additional Components
- **Cursor Theme:** Bibata-Modern-Ice
- **System Info:** Fastfetch with a customized, minimal module configuration

## Installation

### Prerequisites

- NixOS installed on your system
- Flakes enabled in your Nix configuration
- Architecture: `x86_64-linux`
- Channel: `nixos-unstable`

### Enable Flakes

If you haven't already enabled flakes, add this to your `/etc/nixos/configuration.nix`:

```nix
nix.settings.experimental-features = [ "nix-command" "flakes" ];
```

Then rebuild your system:

```bash
sudo nixos-rebuild switch
```

### Clone and Deploy

1. Clone this repository to `/etc/nixos`:
   ```bash
   cd /etc/nixos
   sudo rm -rf ./*  # Backup existing config first!
   sudo git clone https://github.com/PositiveA9/NixOS-Dotfiles.git .
   ```

2. Rebuild your system:
   ```bash
   sudo nixos-rebuild switch --flake /etc/nixos#nixos
   ```

3. Reboot to ensure all changes take effect:
   ```bash
   sudo reboot
   ```

## Reproducing on a New Machine

When setting up this configuration on a different computer:

1. Install NixOS as usual
2. Clone this repository
3. **Replace `hardware-configuration.nix`** with your machine's generated configuration:
   ```bash
   sudo nixos-generate-config --show-hardware-config > hardware-configuration.nix
   ```
4. Review and adjust any hardware-specific settings in `configuration.nix`
5. Rebuild with the flake:
   ```bash
   sudo nixos-rebuild switch --flake .#nixos
   ```

## Customization

### Changing the Theme

Noctalia-Shell generates themes based on your wallpaper. To update:

1. Set your desired wallpaper
2. Noctalia will automatically generate a new color scheme
3. Rebuild to apply changes:
   ```bash
   sudo nixos-rebuild switch --flake /etc/nixos#nixos
   ```

### Modifying Packages

- **System packages:** Edit the `environment.systemPackages` list in `configuration.nix`
- **User packages:** Edit the `home.packages` list in `home.nix`

### Terminal Customization

Alacritty configuration can be found in `home.nix`. Adjust opacity, fonts, or other settings there.

## License

This configuration is provided as-is for personal use and learning. Feel free to use and modify it for your own NixOS setup.

## Contributing

While this is a personal configuration, suggestions and improvements are welcome! Feel free to open an issue or pull request.

## Resources

- [NixOS Manual](https://nixos.org/manual/nixos/stable/)
- [Home Manager Manual](https://nix-community.github.io/home-manager/)
- [Niri Window Manager](https://github.com/YaLTeR/niri)
- [Noctalia-Shell](https://github.com/Noctalia-Shell/noctalia)
- [Nix Flakes](https://nixos.wiki/wiki/Flakes)
